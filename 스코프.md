# 스코프

- 렉시컬 영역이라고 불리우는데 함수가 선언된 위치에 따라 정의되는 영역 
- 스코프 버블은 안쪽에서부터 점점 바깥쪽으로. 하위에서 상위는 가능하지만 상위에서 하위로 검색이 안됨
(버블링 : 거품이 아래에서 위로 올라오는것처럼 점점 상위로 타고 올라오는 것)
- 자바스크립트에서 스코프란 어떤 변수들에 접근할 수 있는지를 정의
- 해당 변수가 살아있게 되는 범위 
- 스코프의 개념이 없으면 변수가 여기저기 섞인다
- 크게 정적 스코프 / 동적 스코프로 나뉨
- 정적 스코프 : 전역 스코프 / 블록 스코프 / 함수 스코프로 나뉨

https://jsfiddle.net/Hanseulgi/d1oyvjtp/

```javascript
var a = 10; // global 전역 변수

function foo() {	// foo
	var b = 10;
  function bar(){	// bar
  	var c = 10;
    console.log(a+b+c); // 10 + 10 + 10 = 결과 30
  }
  bar()
}
foo()
```

> **global** 안에 사는 변수 **a** <br>
> **foo** 안에 사는 변수 **b** <br>
> **bar** 안에 사는 변수 **c**


## 전역 스코프와 지역 스코프

**전역 스코프 (Global scope)** <br>
코드 어디에서든지 참조할 수 있다.<br>

**지역 스코프 (Local scope or Function-level scope)** <br>
함수 코드 블록이 만든 스코프로 함수 자신과 하위 함수에서만 참조할 수 있다. <br>
모든 변수는 스코프를 갖는다. 변수의 관점에서 스코프를 구분하면 다음과 같이 2가지로 나눌 수 있다. <br>
<br>
**전역 변수 (Global variable)** <br>
전역에서 선언된 변수이며 어디에든 참조할 수 있다. <br><br>
**지역 변수 (Local variable)** <br>
지역(함수) 내에서 선언된 변수이며 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다. <br>
변수는 선언 위치(전역 또는 지역)에 의해 스코프를 가지게 된다. 즉, 전역에서 선언된 변수는 전역 스코프를 갖는 전역 변수이고, 지역(함수 내부)에서 선언된 변수는 지역 스코프를 갖는 지역 변수가 된다. <br>

> `결론... ` <br>
> 전역 스코프를 갖는 전역 변수는 전역(코드 어디서든지)에서 참조할 수 있다. 지역(함수 내부)에서 선언된 지역 변수는 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.


## 스코프는

```javascript
function f(x) {
	return x + 3;
}
f(5);		// 8
x;			// ReferenceError : x is not defined
```

함수 안에서는 x가 존재하지만 함수 밖에서는 존재하지 않는다. <br>
x의 스코프는 함수 f이다. <br>
<br>
>- 역주_ 스코프를 시야 또는 범위라고 읽으면 이해하기 편한 설명이 많습니다.
<br>


## 전역 스코프
- 스코프는 계층적이며 프로그램의 바탕이 되는 기본 스코프를 <i>전역스코프</i>라고 한다.<br>
- 어떤 함수도 호출하지 않았을 때 실행 흐름은 전역 스코프에 있다.<br>
- 전역 스코프에서 선언한 것은 무엇이든 프로그램의 모든 스코프에서 볼 수 있다.<br>
<br>
전역 변수를 사용하는 것은 어쩔 수 없지만 <i>의존</i>하는 것은 피해야 한다.
<br>

```javascript
let name = "Irena"	//전역
let age = 25;		//전역

function greet() {
	console.log(`Hello, ${name}!`);
}
function getBirthYear() {
	return new Data().getFullYear() - age;
}
```

**위 코드의 문제점**
- 함수가 호출하는 스코프에 대단히 의존적
- 프로그램의 어디에서든 상관없이 name 값이 변경 될 수 있다.
- 흔한 이름으로 선언이 되어 다른 이유로 사용될 수 있다.
- 예제의 함수들은 프로그램에서 전역 변수들을 정확히 사용한다고 가정해야만 사용이 가능하다.

```javascript
let user = {
	name : "Irena",
	age : 25
}

function greet(user) {
	console.log(`Hello, ${user.name}`);
}
function getBirthYear(user) {
	return new Data().getFullYear() - user.age;
}
```

**더 나은 방법**
- 변수를 객체화 하여 오해의 소지를 줄인다.
- 함수에서 명시적으로 값(매개변수)을 받아, 어떤 곳에서 호출하더라도 옳바른 값이 나오도록 유도한다.



